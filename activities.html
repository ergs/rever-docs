


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Activities &#8212; rever 0.2.9 documentation</title>
    <link rel="stylesheet" href="_static/numpy_friendly.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="_static/cloud.base.js"></script>
    <script type="text/javascript" src="_static/cloud.js"></script>
    <link rel="shortcut icon" href="_static/longship.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Environment Variables" href="envvars.html" />
    <link rel="prev" title="Notes for using rever" href="usepatterns.html" />
     
        <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="http://xon.sh/activities.html"/>

  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="envvars.html" title="Environment Variables"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="usepatterns.html" title="Notes for using rever"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">rever 0.2.9 documentation</a> &#187;</li>
 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="activities">
<h1>Activities<a class="headerlink" href="#activities" title="Permalink to this headline">¶</a></h1>
<p>The following displays information about the release activities that come stock
with rever.</p>
<table border="1" class="colwidths-auto docutils">
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#bibtex"><span class="std std-ref">BibTex</span></a></td>
<td>Writes a BibTex reference for the version of software.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#changelog"><span class="std std-ref">Changelog</span></a></td>
<td>Manages keeping a changelog up-to-date.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#command"><span class="std std-ref">Command</span></a></td>
<td>Runs a command</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#condaforge"><span class="std std-ref">CondaForge</span></a></td>
<td>Updates conda-forge feedstocks.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dockerbuild"><span class="std std-ref">DockerBuild</span></a></td>
<td>Builds a Dockerfile.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dockerpush"><span class="std std-ref">DockerPush</span></a></td>
<td>Pushes a built Dockerfile.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ghpages"><span class="std std-ref">GHPages</span></a></td>
<td>Activity for pushing documentation up to GitHub pages.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ghrelease"><span class="std std-ref">GHRelease</span></a></td>
<td>Performs a github release.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nose"><span class="std std-ref">Nose</span></a></td>
<td>Runs nose tests inside of a container.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pushtag"><span class="std std-ref">PushTag</span></a></td>
<td>Pushes the current tag up to a remote repository.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pypi"><span class="std std-ref">PyPI</span></a></td>
<td>Uploads a package to the Python Package Index.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pytest"><span class="std std-ref">PyTest</span></a></td>
<td>Runs pytest inside of a container.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sphinx"><span class="std std-ref">Sphinx</span></a></td>
<td>Runs sphinx inside of a container.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#tag"><span class="std std-ref">Tag</span></a></td>
<td>Locally tags the current version.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#versionbump"><span class="std std-ref">VersionBump</span></a></td>
<td>Changes the version to the value of $VERSION.</td>
</tr>
</tbody>
</table>
<div class="section" id="listing">
<h2>Listing<a class="headerlink" href="#listing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bibtex">
<span id="id1"></span><h3>BibTex<a class="headerlink" href="#bibtex" title="Permalink to this headline">¶</a></h3>
<p>The BibTex activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.bibtex</span> <span class="kn">import</span> <span class="n">BibTex</span>
</pre></div>
</div>
<p>Writes a BibTex reference for the version of software.</p>
<p>Environment variables that directly affect the behaviour of this
activity are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$BIBTEX_BIBFILE:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">str, The filename to create. Defaults to
<code class="docutils literal notranslate"><span class="pre">'bibtex.bib'</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$BIBTEX_PROJECT_NAME:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">str, The name of the project. This is expanded
in the current envrionment, default <code class="docutils literal notranslate"><span class="pre">$PROJECT</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$BIBTEX_AUTHORS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">list of str, The name of the authors to credit
in the citation. Default has no authors.</td>
</tr>
<tr class="field-even field"><th class="field-name">$BIBTEX_URL:</th><td class="field-body">str, URL to the project. This is expanded in the current
environment, default <code class="docutils literal notranslate"><span class="pre">'$WEBSITE_URL'</span></code>.</td>
</tr>
</tbody>
</table>
<p>Other environment variables that affect the behaviour of the bibtex
activity are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">$PROJECT:</th><td class="field-body">Used as the default project name.</td>
</tr>
<tr class="field-even field"><th class="field-name">$WEBSITE_URL:</th><td class="field-body">Used as the default URL.</td>
</tr>
<tr class="field-odd field"><th class="field-name">$VERSION:</th><td class="field-body">Used in the bibtex entry as part of the identifier.</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bibtex&#39;</span><span class="p">]</span>

<span class="nv">$BIBTEX_BIBFILE</span> <span class="o">=</span> <span class="s1">&#39;bibtex.bib&#39;</span>
<span class="nv">$BIBTEX_PROJECT_NAME</span> <span class="o">=</span> <span class="s1">&#39;$PROJECT&#39;</span>
<span class="nv">$BIBTEX_AUTHORS</span> <span class="o">=</span> <span class="p">()</span>
<span class="nv">$BIBTEX_URL</span> <span class="o">=</span> <span class="s1">&#39;$WEBSITE_URL&#39;</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="changelog">
<span id="id2"></span><h3>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h3>
<p>The Changelog activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.changelog</span> <span class="kn">import</span> <span class="n">Changelog</span>
</pre></div>
</div>
<p>Manages keeping a changelog up-to-date.</p>
<p>This activity may be configured with the following envionment variables:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$CHANGELOG_FILENAME:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">str, path to input file. The default is ‘CHANGELOG’.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$CHANGELOG_PATTERN:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">str, Python regex that is used to find the location
in the file where new changelog entries should be placed. The default is
<code class="docutils literal notranslate"><span class="pre">'..</span> <span class="pre">current</span> <span class="pre">developments'</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$CHANGELOG_HEADER:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">str or callable that accepts a single version argument,
this is the replacement that goes above the new merge entries.
This should contain a string that matches the pattern arg
so that the next release may be inserted automatically.
The default value is:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="cp">.. current developments</span>

v$VERSION

====================
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$CHANGELOG_NEWS:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">str, path to directory containing news files.
The default is <code class="docutils literal notranslate"><span class="pre">'news'</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$CHANGELOG_IGNORE:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">list of str, regexes of filenames in the news directory
to ignore. The default is to ignore the template file.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$CHANGELOG_LATEST:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">str, file to write just the latest part of the
changelog to. This defaults to <code class="docutils literal notranslate"><span class="pre">$REVER_DIR/LATEST</span></code>. This is evaluated
in the current environment.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$CHANGELOG_TEMPLATE:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first last">str, filename of the template file in the
news directory. The default is <code class="docutils literal notranslate"><span class="pre">'TEMPLATE'</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;changelog&#39;</span><span class="p">]</span>

<span class="nv">$CHANGELOG_FILENAME</span> <span class="o">=</span> <span class="s1">&#39;CHANGELOG&#39;</span>
<span class="nv">$CHANGELOG_PATTERN</span> <span class="o">=</span> <span class="s1">&#39;.. current developments&#39;</span>
<span class="nv">$CHANGELOG_HEADER</span> <span class="o">=</span> <span class="s1">&#39;.. current developments</span><span class="se">\n\n</span><span class="s1">v$VERSION</span><span class="se">\n</span><span class="s1">====================</span><span class="se">\n\n</span><span class="s1">&#39;</span>
<span class="nv">$CHANGELOG_NEWS</span> <span class="o">=</span> <span class="s1">&#39;news&#39;</span>
<span class="nv">$CHANGELOG_IGNORE</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$CHANGELOG_LATEST</span> <span class="o">=</span> <span class="s1">&#39;$REVER_DIR/LATEST&#39;</span>
<span class="nv">$CHANGELOG_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;TEMPLATE&#39;</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="command">
<span id="id3"></span><h3>Command<a class="headerlink" href="#command" title="Permalink to this headline">¶</a></h3>
<p>The Command activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.command</span> <span class="kn">import</span> <span class="n">Command</span>
</pre></div>
</div>
<p>Runs a command</p>
<p>Optionally, an undo command can also be given to undo the given command</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The recommended way to create a command is with the
<a class="reference internal" href="api/activities/command.html#rever.activities.command.command" title="rever.activities.command.command"><code class="xref py py-func docutils literal notranslate"><span class="pre">rever.activities.command.command()</span></code></a> function.</p>
</div>
<hr class="docutils" />
</div>
<div class="section" id="condaforge">
<span id="id4"></span><h3>CondaForge<a class="headerlink" href="#condaforge" title="Permalink to this headline">¶</a></h3>
<p>The CondaForge activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.conda_forge</span> <span class="kn">import</span> <span class="n">CondaForge</span>
</pre></div>
</div>
<p>Updates conda-forge feedstocks.</p>
<p>The behaviour of this activity may be adjusted through the following
environment variables:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$CONDA_FORGE_FEEDSTOCK:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">str or None, feedstock name or URL,
default <code class="docutils literal notranslate"><span class="pre">$PROJECT-feedstock</span></code>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$CONDA_FORGE_PROTOCOL:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">str, one of <code class="docutils literal notranslate"><span class="pre">'ssh'</span></code>, <code class="docutils literal notranslate"><span class="pre">'http'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'https'</span></code>
that specifies how the activity should interact with github when
cloning, pulling, or pushing to the feedstock repo. Note that
<code class="docutils literal notranslate"><span class="pre">'ssh'</span></code> requires you to have an SSH key registered with github.
The default  is <code class="docutils literal notranslate"><span class="pre">'ssh'</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$CONDA_FORGE_SOURCE_URL:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">str, the URL that the recipe will use to
download the source code. This is needed so that we may update the
hash of the downloaded file. This string is evaluated with the current
environment. Default
<code class="docutils literal notranslate"><span class="pre">'https://github.com/$GITHUB_ORG/$GITHUB_REPO/archive/$VERSION.tar.gz'</span></code>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$CONDA_FORGE_HASH_TYPE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">str, the type of hash that the recipe uses, eg
<code class="docutils literal notranslate"><span class="pre">'md5'</span></code> or <code class="docutils literal notranslate"><span class="pre">'sha256'</span></code>. Default <code class="docutils literal notranslate"><span class="pre">'sha256'</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$CONDA_FORGE_PATTERNS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">list or 3-tuples of str, this is list of
(filename, pattern-regex, replacement) tuples that is evaluated
inside of the recipe directory. This is similar to the version bump
pattern structure. Both the pattern-regex str and the replacement str
will have environment variables expanded. The following environment
variables are added for this evaluation:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">$SOURCE_URL</span></code>: the fully expanded source code URL.</li>
<li><code class="docutils literal notranslate"><span class="pre">$HASH_TYPE</span></code>: the hash type used to hash <code class="docutils literal notranslate"><span class="pre">$SOURCE_URL</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">$HASH</span></code>: the hexdigest of <code class="docutils literal notranslate"><span class="pre">$SOURCE_URL</span></code>.</li>
</ul>
<p>The default patterns match most standard recipes.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$CONDA_FORGE_PULL_REQUEST:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">bool, whether the activity should open
a pull request to the upstream conda-forge feestock, default True.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$CONDA_FORGE_RERENDER:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">bool, whether the activity should rerender the
feedstock using conda-smithy, default True.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$CONDA_FORGE_FORK:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">bool, whether the activity should create a new fork of
the feedstock if it doesn’t exist already, default True.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$CONDA_FORGE_FORK_ORG:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first last">str, the org to fork the recipe to or which holds
the fork, if <code class="docutils literal notranslate"><span class="pre">''</span></code> use the registered gh username, defaults to <code class="docutils literal notranslate"><span class="pre">''</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Other environment variables that affect the behavior are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$GITHUB_CREDFILE:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">the credential file to use. This should NOT be
set in the rever.xsh file</td>
</tr>
<tr class="field-even field"><th class="field-name">$GITHUB_ORG:</th><td class="field-body">the github organization that the project belongs to.</td>
</tr>
<tr class="field-odd field"><th class="field-name">$GITHUB_REPO:</th><td class="field-body">the github repository of the project.</td>
</tr>
<tr class="field-even field"><th class="field-name">$TAG_TEMPLATE:</th><td class="field-body">str, the template string used to tag the version, by default
this is ‘$VERSION’. Used to download project source.</td>
</tr>
<tr class="field-odd field"><th class="field-name">$PROJECT:</th><td class="field-body">the name of the project being released.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$REVER_CONFIG_DIR:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">the user’s config directory for rever, which
is where the GitHub credential files are stored by default.</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;conda_forge&#39;</span><span class="p">]</span>

<span class="nv">$CONDA_FORGE_FEEDSTOCK</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$CONDA_FORGE_PROTOCOL</span> <span class="o">=</span> <span class="s1">&#39;ssh&#39;</span>
<span class="nv">$CONDA_FORGE_SOURCE_URL</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$CONDA_FORGE_HASH_TYPE</span> <span class="o">=</span> <span class="s1">&#39;sha256&#39;</span>
<span class="nv">$CONDA_FORGE_PATTERNS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;meta.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;  version:</span><span class="se">\\</span><span class="s1">s*[A-Za-z0-9._-]+&#39;</span><span class="p">,</span> <span class="s1">&#39;  version: &quot;$VERSION&quot;&#39;</span><span class="p">),</span>
    <span class="p">(</span>
        <span class="s1">&#39;meta.yaml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;{</span><span class="si">% s</span><span class="s1">et version = &quot;.*&quot; %}&#39;</span><span class="p">,</span>
        <span class="s1">&#39;{</span><span class="si">% s</span><span class="s1">et version = &quot;$VERSION&quot; %}&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;meta.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;  number:.*&#39;</span><span class="p">,</span> <span class="s1">&#39;  number: 0&#39;</span><span class="p">),</span>
    <span class="p">(</span>
        <span class="s1">&#39;meta.yaml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;{</span><span class="si">% s</span><span class="s1">et $HASH_TYPE = &quot;[0-9A-Fa-f]+&quot; %}&#39;</span><span class="p">,</span>
        <span class="s1">&#39;{</span><span class="si">% s</span><span class="s1">et $HASH_TYPE = &quot;$HASH&quot; %}&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;meta.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;  $HASH_TYPE:</span><span class="se">\\</span><span class="s1">s*[0-9A-Fa-f]+&#39;</span><span class="p">,</span> <span class="s1">&#39;  $HASH_TYPE: $HASH&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="nv">$CONDA_FORGE_PULL_REQUEST</span> <span class="o">=</span> <span class="bp">True</span>
<span class="nv">$CONDA_FORGE_RERENDER</span> <span class="o">=</span> <span class="bp">True</span>
<span class="nv">$CONDA_FORGE_FORK</span> <span class="o">=</span> <span class="bp">True</span>
<span class="nv">$CONDA_FORGE_FORK_ORG</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="dockerbuild">
<span id="id5"></span><h3>DockerBuild<a class="headerlink" href="#dockerbuild" title="Permalink to this headline">¶</a></h3>
<p>The DockerBuild activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.docker</span> <span class="kn">import</span> <span class="n">DockerBuild</span>
</pre></div>
</div>
<p>Builds a Dockerfile.</p>
<p>The behaviour of this activity may be adjusted through the following
environment variables:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$DOCKER_BUILD_PATH:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">str, path to the Dockerfile, default (None) looks from
reads from <code class="docutils literal notranslate"><span class="pre">$DOCKERFILE</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$DOCKER_BUILD_CONTEXT:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">str, directory to execute the build within.
An empty string indicates that the image should be built in directory
containing the path. The default (None) reads from <code class="docutils literal notranslate"><span class="pre">$DOCKERFILE_CONTEXT</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$DOCKER_BUILD_TAGS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">list of str, Tags the <code class="docutils literal notranslate"><span class="pre">$DOCKERFILE</span></code> should be built
and pushed with. Default (None) reads from <code class="docutils literal notranslate"><span class="pre">$DOCKERFILE_TAGS</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$DOCKER_BUILD_CACHE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">bool, Flag for whether or not to use the cache,
default False.</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;docker_build&#39;</span><span class="p">]</span>

<span class="nv">$DOCKER_BUILD_PATH</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$DOCKER_BUILD_CONTEXT</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$DOCKER_BUILD_TAGS</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$DOCKER_BUILD_CACHE</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="dockerpush">
<span id="id6"></span><h3>DockerPush<a class="headerlink" href="#dockerpush" title="Permalink to this headline">¶</a></h3>
<p>The DockerPush activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.docker</span> <span class="kn">import</span> <span class="n">DockerPush</span>
</pre></div>
</div>
<p>Pushes a built Dockerfile.</p>
<p>The behaviour of this activity may be adjusted through the following
environment variables:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$DOCKER_PUSH_TAGS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">list of str, Tags that the <code class="docutils literal notranslate"><span class="pre">$DOCKERFILE</span></code> should be built
and pushed with. Default (None) reads from <code class="docutils literal notranslate"><span class="pre">$DOCKERFILE_TAGS</span></code>.</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;docker_push&#39;</span><span class="p">]</span>

<span class="nv">$DOCKER_PUSH_TAGS</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="ghpages">
<span id="id7"></span><h3>GHPages<a class="headerlink" href="#ghpages" title="Permalink to this headline">¶</a></h3>
<p>The GHPages activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.ghpages</span> <span class="kn">import</span> <span class="n">GHPages</span>
</pre></div>
</div>
<p>Activity for pushing documentation up to GitHub pages.</p>
<p>This activity uses the following environment variable:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">$GHPAGES_REPO:</th><td class="field-body">str, the URL of the GitHUb pages repository.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$GHPAGES_BRANCH:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">str, the GitHub pages branch name, i.e. either
<code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> or <code class="docutils literal notranslate"><span class="pre">master</span></code>.  If not provided, the activity will
attempt to deduce it from the repo name.</td>
</tr>
<tr class="field-odd field"><th class="field-name">$GHPAGES_COPY:</th><td class="field-body">list or str 2-tuples, This is a list of (src, dst)
pairs of files to copy from the project into the gh-pages repo.
These pairs will have environment variables expanded and it is
evaluated in the current directory (where rever was run from).
src files or directories that don’t exist will be skipped.
After variable expansion, this list will be deduplicated.
Additionally, the environment variable <code class="docutils literal notranslate"><span class="pre">$GHPAGES_REPO_DIR</span></code>
is added to allow easy access to the local clone of the
repo, which is at <code class="docutils literal notranslate"><span class="pre">$REVER_DIR/ghpages-repo</span></code>. By default,
this will look in the sphinx html directory created by the
sphinx activity.</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ghpages&#39;</span><span class="p">]</span>

<span class="nv">$GHPAGES_REPO</span> <span class="o">=</span> <span class="s1">&#39;&lt;no default value&gt;&#39;</span>
<span class="nv">$GHPAGES_BRANCH</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$GHPAGES_COPY</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;$SPHINX_HOST_DIR/html&#39;</span><span class="p">,</span> <span class="s1">&#39;$GHPAGES_REPO_DIR&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;$REVER_DIR/sphinx-build/html&#39;</span><span class="p">,</span> <span class="s1">&#39;$GHPAGES_REPO_DIR&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="ghrelease">
<span id="id8"></span><h3>GHRelease<a class="headerlink" href="#ghrelease" title="Permalink to this headline">¶</a></h3>
<p>The GHRelease activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.ghrelease</span> <span class="kn">import</span> <span class="n">GHRelease</span>
</pre></div>
</div>
<p>Performs a github release.</p>
<p>The behaviour of this activity may be adjusted through the following
environment variables:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$GHRELEASE_NAME:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">str, Name of the release.  This is evaluated with the
version. Default is <code class="docutils literal notranslate"><span class="pre">$VERSION</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$GHRELEASE_NOTES:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">str or None, Release notes to send to the release
page. If None (the default), this is read from <code class="docutils literal notranslate"><span class="pre">$CHANGELOG_LATEST</span></code>,
if present, or failing that <code class="docutils literal notranslate"><span class="pre">$REVER_DIR/LATEST</span></code>. If neither file exists,
an empty string is passes in.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$GHRELEASE_PREPEND:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">str, string to prepend to the release notes,
defaults to ‘’</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$GHRELEASE_APPEND:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">str, string to append to the release notes,
defaults to ‘’</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$GHRELEASE_ASSETS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">iterable of str or functions, Extra assests to
upload to the GitHub release. This is ususally a tarball of the source
code or a binary package. If the asset is a string, it is interpreted
as a filename (and evalauated in the current environment). If the asset
is a function, the function is called with no arguments and should return
either a string filename or a list of string filenames. The asset
functions will usually generate or acquire the asset. By default, this
a tarball of the release tag will be uploaded.</td>
</tr>
</tbody>
</table>
<p>Other environment variables that affect the behavior are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$GITHUB_CREDFILE:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">the credential file to use.</td>
</tr>
<tr class="field-even field"><th class="field-name">$GITHUB_ORG:</th><td class="field-body">the github organization that the project belongs to.</td>
</tr>
<tr class="field-odd field"><th class="field-name">$GITHUB_REPO:</th><td class="field-body">the github repository of the project.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$REVER_CONFIG_DIR:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">the user’s config directory for rever, which
is where the GitHub credential files are stored by default.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$CHANGELOG_LATEST:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">path to the latest release notes file
created by the changelog activity.</td>
</tr>
<tr class="field-even field"><th class="field-name">$TAG_TEMPLATE:</th><td class="field-body">may used to find the tag name when creating the default
asset.</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ghrelease&#39;</span><span class="p">]</span>

<span class="nv">$GHRELEASE_NAME</span> <span class="o">=</span> <span class="s1">&#39;$VERSION&#39;</span>
<span class="nv">$GHRELEASE_NOTES</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$GHRELEASE_PREPEND</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="nv">$GHRELEASE_APPEND</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="nv">$GHRELEASE_ASSETS</span> <span class="o">=</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">function</span> <span class="n">git_archive_asset</span> <span class="n">at</span> <span class="mh">0x2afa9d795488</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="nose">
<span id="id9"></span><h3>Nose<a class="headerlink" href="#nose" title="Permalink to this headline">¶</a></h3>
<p>The Nose activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.nose</span> <span class="kn">import</span> <span class="n">Nose</span>
</pre></div>
</div>
<p>Runs nose tests inside of a container.</p>
<p>Environment variables that modify this activity’s behaviour are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">$NOSE_COMMAND:</th><td class="field-body">str, nose command to execute, defaults to ‘nosetests’.</td>
</tr>
<tr class="field-even field"><th class="field-name">$NOSE_ARGS:</th><td class="field-body">str or list of str, additional arguments to send to the
nose command. By default no additional arguments are sent.</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;nose&#39;</span><span class="p">]</span>

<span class="nv">$NOSE_COMMAND</span> <span class="o">=</span> <span class="s1">&#39;nosetests&#39;</span>
<span class="nv">$NOSE_ARGS</span> <span class="o">=</span> <span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="pushtag">
<span id="id10"></span><h3>PushTag<a class="headerlink" href="#pushtag" title="Permalink to this headline">¶</a></h3>
<p>The PushTag activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.push_tag</span> <span class="kn">import</span> <span class="n">PushTag</span>
</pre></div>
</div>
<p>Pushes the current tag up to a remote repository.</p>
<p>This activity takes the following parameters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$PUSH_TAG_REMOTE:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">str or None, remote URL to push tags to. If <code class="docutils literal notranslate"><span class="pre">$REVER_VCS</span></code> is
set to <code class="docutils literal notranslate"><span class="pre">'git'</span></code> and both <code class="docutils literal notranslate"><span class="pre">$GITHUB_ORG</span></code> and <code class="docutils literal notranslate"><span class="pre">$GITHUB_REPO</span></code> are also set,
this variable will default to <code class="docutils literal notranslate"><span class="pre">git&#64;github.com:$GITHUB_ORG/$GITHUB_REPO.git</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$PUSH_TAG_TARGET:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">str or None, remote branch to push to once the tag has been made.
The default is None, which uses the current branch.</td>
</tr>
</tbody>
</table>
<p>Other environment variables that affect the behavior are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">$REVER_VCS:</th><td class="field-body">str or None, is used to help specify default remote URLs.</td>
</tr>
<tr class="field-even field"><th class="field-name">$GITHUB_ORG:</th><td class="field-body">str or None, GitHub org to push to if no <code class="docutils literal notranslate"><span class="pre">$PUSH_TAG_REMOTE</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">$GITHUB_REPO:</th><td class="field-body">str or None GitHub repo to push to if no <code class="docutils literal notranslate"><span class="pre">$PUSH_TAG_REMOTE</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">$TAG_TEMPLATE:</th><td class="field-body">str, the template string to tag the version with,
by default this is ‘$VERSION’. This is used in undoing remote tags</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;push_tag&#39;</span><span class="p">]</span>

<span class="nv">$PUSH_TAG_REMOTE</span> <span class="o">=</span> <span class="bp">None</span>
<span class="nv">$PUSH_TAG_TARGET</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="pypi">
<span id="id11"></span><h3>PyPI<a class="headerlink" href="#pypi" title="Permalink to this headline">¶</a></h3>
<p>The PyPI activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.pypi</span> <span class="kn">import</span> <span class="n">PyPI</span>
</pre></div>
</div>
<p>Uploads a package to the Python Package Index.</p>
<p>The behaviour of this activity may be adjusted through the following
environment variables:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">$PYPI_RC:</th><td class="field-body">str, path to the pypirc file, default <code class="docutils literal notranslate"><span class="pre">~/.pypirc</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$PYPI_BUILD_COMMANDS:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">list of str, The commands to run in setup.py
that will build the project, default <code class="docutils literal notranslate"><span class="pre">['sdist']</span></code>.  Other examples
include <code class="docutils literal notranslate"><span class="pre">'bdist'</span></code> or <code class="docutils literal notranslate"><span class="pre">'bdist_wininst'</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">$PYPI_UPLOAD:</th><td class="field-body">bool, whether or not to upload PyPI, default True.</td>
</tr>
</tbody>
</table>
<p>Other environment variables that affect the behavior are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">$PYTHON:</th><td class="field-body">the path to the Python interpreter.</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pypi&#39;</span><span class="p">]</span>

<span class="nv">$PYPI_RC</span> <span class="o">=</span> <span class="s1">&#39;$HOME/.pypirc&#39;</span>
<span class="nv">$PYPI_BUILD_COMMANDS</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;sdist&#39;</span><span class="p">,</span> <span class="p">)</span>
<span class="nv">$PYPI_UPLOAD</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="pytest">
<span id="id12"></span><h3>PyTest<a class="headerlink" href="#pytest" title="Permalink to this headline">¶</a></h3>
<p>The PyTest activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.pytest</span> <span class="kn">import</span> <span class="n">PyTest</span>
</pre></div>
</div>
<p>Runs pytest inside of a container.</p>
<p>The environment variable that affects the behaviour of this activity is:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$PYTEST_COMMAND:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">str, the test command to run. The defaults to
<code class="docutils literal notranslate"><span class="pre">'pytest'</span></code>.</td>
</tr>
</tbody>
</table>
<p>Additionally, the <code class="docutils literal notranslate"><span class="pre">$DOCKER_*</span></code> environment variables will affect the
behaviour of the conatiner that is used for testing.</p>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pytest&#39;</span><span class="p">]</span>

<span class="nv">$PYTEST_COMMAND</span> <span class="o">=</span> <span class="s1">&#39;pytest&#39;</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="sphinx">
<span id="id13"></span><h3>Sphinx<a class="headerlink" href="#sphinx" title="Permalink to this headline">¶</a></h3>
<p>The Sphinx activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.sphinx</span> <span class="kn">import</span> <span class="n">Sphinx</span>
</pre></div>
</div>
<p>Runs sphinx inside of a container.</p>
<p>Environment variables that modify this activity’s behaviour are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$SPHINX_DOCS_DIR:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">str, the directory in the container that is the root of
the documentation. This must be an absolute path. Defaults to
<code class="docutils literal notranslate"><span class="pre">'$DOCKER_HOME/$PROJECT/docs'</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$SPHINX_HOST_DIR:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">str, the directory on the host (ie outside of the container
to place the built docs in, default <code class="docutils literal notranslate"><span class="pre">'$REVER_DIR/sphinx-build'</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">$SPHINX_BUILD_DIR:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">str, the directory in the container where sphinx will
build the docs, default <code class="docutils literal notranslate"><span class="pre">'{docs_dir}/_build'</span></code>. If <code class="docutils literal notranslate"><span class="pre">'{docs_dir}'</span></code> is
present in the string, then the string will be formated with the
value of $SPHINX_DOCS_DIR. Otherwise, enviroment variables will be expanded.</td>
</tr>
<tr class="field-even field"><th class="field-name">$SPHINX_OPTS:</th><td class="field-body">str or list of str, Additional options to provide to the sphinx
builders. Default to no extra options.</td>
</tr>
<tr class="field-odd field"><th class="field-name">$SPHINX_PAPER:</th><td class="field-body">str, The paper size to use in latex.  Maybe <code class="docutils literal notranslate"><span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">'a4'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'letter'</span></code>, or similar.  Defaults to an empty string, which disables this
option.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">$SPHINX_BUILDER:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">list of str, The build targets that sphinx should construct.
This defaults to <code class="docutils literal notranslate"><span class="pre">['html']</span></code>.</td>
</tr>
</tbody>
</table>
<p>As a dockerized activity, the docker environment variables affect the execution
of the sphinx activity.</p>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sphinx&#39;</span><span class="p">]</span>

<span class="nv">$SPHINX_DOCS_DIR</span> <span class="o">=</span> <span class="s1">&#39;$DOCKER_HOME/$PROJECT/docs&#39;</span>
<span class="nv">$SPHINX_HOST_DIR</span> <span class="o">=</span> <span class="s1">&#39;$REVER_DIR/sphinx-build&#39;</span>
<span class="nv">$SPHINX_BUILD_DIR</span> <span class="o">=</span> <span class="s1">&#39;{docs_dir}/_build&#39;</span>
<span class="nv">$SPHINX_OPTS</span> <span class="o">=</span> <span class="p">()</span>
<span class="nv">$SPHINX_PAPER</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="nv">$SPHINX_BUILDERS</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="tag">
<span id="id14"></span><h3>Tag<a class="headerlink" href="#tag" title="Permalink to this headline">¶</a></h3>
<p>The Tag activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.tag</span> <span class="kn">import</span> <span class="n">Tag</span>
</pre></div>
</div>
<p>Locally tags the current version.</p>
<p>This activity takes the following parameters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">$TAG_TEMPLATE:</th><td class="field-body">str, the template string to tag the version with,
by default this is ‘$VERSION’</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span>

<span class="nv">$TAG_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;$VERSION&#39;</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="versionbump">
<span id="id15"></span><h3>VersionBump<a class="headerlink" href="#versionbump" title="Permalink to this headline">¶</a></h3>
<p>The VersionBump activity class is available via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rever.activities.version_bump</span> <span class="kn">import</span> <span class="n">VersionBump</span>
</pre></div>
</div>
<p>Changes the version to the value of $VERSION.</p>
<p>This activity is parameterized by the following environment
variable:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">$VERSION_BUMP_PATTERNS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">list of 3-tuples of str,
This activity is only usefule if replacement patterns are supplied to it.
This argument is an iterable of 3-tuples consisting of:</p>
<ul class="simple">
<li>filename, str - file to update the version in</li>
<li>pattern, str - A Python regular expression that specifies
how to find matching lines for the replacement string.
Leading whitespace will be captured and replaced. The pattern
here can start at the first non-whitespace character.</li>
<li>new, str or function returning a string - the replacement
template as a string or a simple callable that accepts the
version. If it is a string, it is expanded with environment
variables.</li>
</ul>
<p>For example:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span>$VERSION_BUMP_PATTERNS = [
    # replace __version__ in init file
    (&#39;src/__init__.py&#39;, &#39;__version__\s*=.*&#39;, &quot;__version__ = &#39;$VERSION&#39;&quot;),

    # replace version in appveyor
    (&#39;.appveyor.yml&#39;, &#39;version:\s*&#39;,
      (lambda ver: &#39;version: {0}.{{build}}&#39;.format(ver))),
  ...
]
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>This activity’s defaults are equivalent to the following <code class="docutils literal notranslate"><span class="pre">rever.xsh</span></code> file:</p>
<div class="highlight-xonsh notranslate"><div class="highlight"><pre><span></span><span class="nv">$ACTIVITIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;version_bump&#39;</span><span class="p">]</span>

<span class="nv">$VERSION_BUMP_PATTERNS</span> <span class="o">=</span> <span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="index.html" title="index">
          <img class="logo" src="_static/longship-256.png" alt="Logo"/>
        </a></p><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Activities</a><ul>
<li><a class="reference internal" href="#listing">Listing</a><ul>
<li><a class="reference internal" href="#bibtex">BibTex</a></li>
<li><a class="reference internal" href="#changelog">Changelog</a></li>
<li><a class="reference internal" href="#command">Command</a></li>
<li><a class="reference internal" href="#condaforge">CondaForge</a></li>
<li><a class="reference internal" href="#dockerbuild">DockerBuild</a></li>
<li><a class="reference internal" href="#dockerpush">DockerPush</a></li>
<li><a class="reference internal" href="#ghpages">GHPages</a></li>
<li><a class="reference internal" href="#ghrelease">GHRelease</a></li>
<li><a class="reference internal" href="#nose">Nose</a></li>
<li><a class="reference internal" href="#pushtag">PushTag</a></li>
<li><a class="reference internal" href="#pypi">PyPI</a></li>
<li><a class="reference internal" href="#pytest">PyTest</a></li>
<li><a class="reference internal" href="#sphinx">Sphinx</a></li>
<li><a class="reference internal" href="#tag">Tag</a></li>
<li><a class="reference internal" href="#versionbump">VersionBump</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="usepatterns.html"
                          title="Previous page">&larr; Notes for using rever</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="envvars.html"
                          title="Next page">&rarr; Environment Variables</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/activities.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="envvars.html" title="Environment Variables"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="usepatterns.html" title="Notes for using rever"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">rever 0.2.9 documentation</a> &#187;</li>
 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Anthony Scopatz.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>